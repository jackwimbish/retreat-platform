<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:plone="http://namespaces.plone.org/plone"
    i18n_domain="retreat">

  <!-- Include permissions -->
  <include file="permissions.zcml" />
  
  <!-- Public portrait view -->
  <browser:page
      name="public-portrait"
      for="*"
      class=".public_portrait.PublicPortraitView"
      permission="zope.Public"
      />
      
  <!-- Event subscriber for new issue notifications -->
  <subscriber
      for="plone.dexterity.interfaces.IDexterityContent
           zope.lifecycleevent.interfaces.IObjectAddedEvent"
      handler=".notifications.notify_new_issue"
      />
      
  <!-- Event subscriber for issue modification tracking -->
  <subscriber
      for="zope.lifecycleevent.interfaces.IObjectModifiedEvent"
      handler=".activities.log_issue_changes"
      />
      
  <!-- Event subscriber for camp alert notifications -->
  <subscriber
      for="plone.dexterity.interfaces.IDexterityContent
           zope.lifecycleevent.interfaces.IObjectAddedEvent"
      handler=".camp_alerts.send_camp_alert"
      />
      
  <!-- Include API configuration -->
  <include file="api.zcml" />

</configure>